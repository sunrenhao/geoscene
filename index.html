<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="initial-scale=1.0, user-scalable=no, width=device-width"
    />
    <title>轨迹回放</title>
    <link
      rel="stylesheet"
      href="https://a.amap.com/jsapi_demos/static/demo-center/css/demo-center.css"
    />
    <style>
      html,
      body,
      #container {
        height: 100%;
        width: 100%;
      }

      .input-card .btn {
        margin-right: 1.2rem;
        width: 9rem;
      }

      .input-card .btn:last-child {
        margin-right: 0;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div class="input-card">
      <h4>轨迹回放控制</h4>
      <div class="input-item">
        <input
          type="button"
          class="btn"
          value="开始动画"
          id="start"
          onclick="startAnimation()"
        />
        <input
          type="button"
          class="btn"
          value="暂停动画"
          id="pause"
          onclick="pauseAnimation()"
        />
      </div>
      <div class="input-item">
        <input
          type="button"
          class="btn"
          value="继续动画"
          id="resume"
          onclick="resumeAnimation()"
        />
        <input
          type="button"
          class="btn"
          value="停止动画"
          id="stop"
          onclick="stopAnimation()"
        />
      </div>
    </div>
    <script
      type="text/javascript"
      src="https://webapi.amap.com/maps?v=1.4.15&key=c1c0d2288a11c68caff7c6bbc1c83672"
    ></script>
    <script>
      var marker,
        lineArr = [
          [116.022611955671465, 40.345960368575746, 0.0],
          [116.022583961746605, 40.346156497595068, 0.0],
          [116.022561855386144, 40.346353062357061, 0.0],
          [116.022545648134269, 40.346549960210538, 0.0],
          [116.022535348454511, 40.346747088331234, 0.0],
          [116.022530961725451, 40.346944343775554, 0.0],
          [116.022532490237921, 40.347141623534327, 0.0],
          [116.022539933193642, 40.347338824586572, 0.0],
          [116.022553286705914, 40.34753584395331, 0.0],
          [116.022572543801388, 40.347732578751355, 0.0],
          [116.022555575959203, 40.347847159407642, 0.0],
          [116.022545402020128, 40.347962206301688, 0.0],
          [116.02254204266535, 40.348077485569206, 0.0],
          [116.022545504723624, 40.348192762874724, 0.0],
          [116.022555781157394, 40.348307803887991, 0.0],
          [116.022572851077172, 40.34842237476024, 0.0],
          [116.022596679783973, 40.348536242599593, 0.0],
          [116.02262721883973, 40.348649175944416, 0.0],
          [116.022664406165973, 40.348760945233806, 0.0],
          [116.022708166169892, 40.348871323274174, 0.0],
          [116.022758409897932, 40.348980085701044, 0.0],
          [116.02281503521678, 40.349087011435032, 0.0],
          [116.022877927020815, 40.349191883131247, 0.0],
          [116.022946957466246, 40.34929448762098, 0.0],
          [116.02299868921817, 40.349401956190611, 0.0],
          [116.023056983722981, 40.349507455326098, 0.0],
          [116.023121712443569, 40.349610752415749, 0.0],
          [116.023192732655716, 40.349711619704173, 0.0],
          [116.023269887762538, 40.349809834794343, 0.0],
          [116.023353007640111, 40.349905181137864, 0.0],
          [116.023441909012348, 40.349997448512411, 0.0],
          [116.023536395855217, 40.35008643348506, 0.0],
          [116.023636259828891, 40.350171939860815, 0.0],
          [116.023741280737255, 40.350253779115043, 0.0],
          [116.02385122701331, 40.350331770809071, 0.0],
          [116.023965856229808, 40.350405742987888, 0.0],
          [116.024084915633836, 40.350475532559223, 0.0],
          [116.024208142704069, 40.350540985653033, 0.0],
          [116.024436894459754, 40.350694062672851, 0.0],
          [116.02467021583, 40.350843079906824, 0.0],
          [116.024907982806681, 40.350987958180859, 0.0],
          [116.025150069018892, 40.351128620520434, 0.0],
          [116.025396345800075, 40.351264992191425, 0.0],
          [116.025646682256408, 40.35139700073983, 0.0],
          [116.026147123226025, 40.351844646038799, 0.0],
          [116.026652245029936, 40.352289224568906, 0.0],
          [116.027162015371857, 40.352730707965712, 0.0],
          [116.027676401658255, 40.353169068062847, 0.0],
          [116.027984376595342, 40.353393252060052, 0.0],
          [116.028296686598765, 40.353613924968904, 0.0],
          [116.028613262778393, 40.353831038147518, 0.0],
          [116.028934035303024, 40.3540445437391, 0.0],
          [116.029258933415832, 40.354254394682521, 0.0],
          [116.02958788544997, 40.354460544722635, 0.0],
          [116.029423128777012, 40.354395210371706, 0.0],
          [116.029261419745524, 40.354325594422839, 0.0],
          [116.02910294987683, 40.354251779313117, 0.0],
          [116.028947906855947, 40.354173852452398, 0.0],
          [116.028796474309289, 40.354091906119848, 0.0],
          [116.028648831587091, 40.354006037354758, 0.0],
          [116.028505153551208, 40.353916347841704, 0.0],
          [116.028365610367757, 40.353822943790085, 0.0],
          [116.028230367305852, 40.353725935808527, 0.0],
          [116.028099584541593, 40.353625438773882, 0.0],
          [116.027973416968592, 40.353521571695246, 0.0],
          [116.027852014014329, 40.353414457573116, 0.0],
          [116.027735519463363, 40.353304223253744, 0.0],
          [116.027142466760381, 40.352775521463343, 0.0],
          [116.026544708446167, 40.352249902137061, 0.0],
          [116.025942272181155, 40.351727389669669, 0.0],
          [116.02577071125711, 40.351596261734088, 0.0],
          [116.025594377038004, 40.351468864081056, 0.0],
          [116.025413409143766, 40.351345297604396, 0.0],
          [116.025227950863297, 40.35122566016436, 0.0],
          [116.025038149040924, 40.351110046510037, 0.0],
          [116.024844153960174, 40.350998548204295, 0.0],
          [116.024646119224727, 40.350891253551197, 0.0],
          [116.024444201636854, 40.350788247526005, 0.0],
          [116.024238561073247, 40.350689611707907, 0.0],
          [116.024029360358412, 40.35059542421525, 0.0],
          [116.023816765135749, 40.350505759643703, 0.0],
          [116.023541519858938, 40.350395685582221, 0.0],
          [116.023263192971569, 40.350290207805315, 0.0],
          [116.022981916614938, 40.350189376412402, 0.0],
          [116.022697824330635, 40.350093239296129, 0.0],
          [116.022411050997221, 40.35000184211971, 0.0],
          [116.022121732766081, 40.34991522829516, 0.0],
          [116.022025287839412, 40.349889642081138, 0.0],
          [116.02192702350689, 40.349868454773819, 0.0],
          [116.021827284882804, 40.34985174078939, 0.0],
          [116.021726422259178, 40.349839558832365, 0.0],
          [116.02162478987573, 40.349831951689474, 0.0],
          [116.021522744675678, 40.349828946079327, 0.0],
          [116.021420645051961, 40.349830552558537, 0.0],
          [116.021318849588809, 40.349836765484653, 0.0],
          [116.021217715802081, 40.349847563036001, 0.0],
          [116.021088723853524, 40.349868258976016, 0.0],
          [116.020961190399134, 40.349893668110205, 0.0],
          [116.020835411767365, 40.349923731394234, 0.0],
          [116.020711680209345, 40.349958378968843, 0.0],
          [116.020590283219718, 40.349997530322163, 0.0],
          [116.020471502868688, 40.350041094476879, 0.0],
          [116.02035561514657, 40.350088970201703, 0.0],
          [116.020242889322603, 40.350141046246634, 0.0],
          [116.020133587319222, 40.350197201601553, 0.0],
          [116.020027963103502, 40.35025730577749, 0.0],
          [116.019926262097016, 40.350321219109915, 0.0],
          [116.019601367511427, 40.350473034254236, 0.0],
          [116.019279856560686, 40.350628976686664, 0.0],
          [116.018961819525913, 40.350789002589721, 0.0],
          [116.018647345712679, 40.350953066998812, 0.0],
          [116.018336523425958, 40.351121123814963, 0.0],
          [116.018029439945451, 40.351293125817712, 0.0],
        ];

      var map = new AMap.Map("container", {
        resizeEnable: true,
        center: [116.022611955671465, 40.345960368575746, 0.0],
        zoom: 17,
      });

      marker = new AMap.Marker({
        map: map,
        position: [116.022611955671465, 40.345960368575746, 0.0],
        icon: "https://webapi.amap.com/images/car.png",
        offset: new AMap.Pixel(-26, -13),
        autoRotation: false,
        angle: -90,
      });

      // 绘制轨迹
      var polyline = new AMap.Polyline({
        map: map,
        path: lineArr,
        showDir: true,
        strokeColor: "#28F", //线颜色
        // strokeOpacity: 1,     //线透明度
        strokeWeight: 8, //线宽
        // strokeStyle: "solid"  //线样式
      });

      var passedPolyline = new AMap.Polyline({
        map: map,
        // path: lineArr,
        strokeColor: "#AF5", //线颜色
        // strokeOpacity: 1,     //线透明度
        strokeWeight: 6, //线宽
        // strokeStyle: "solid"  //线样式
      });

      marker.on("moving", function (e) {
        passedPolyline.setPath(e.passedPath);
      });

      map.setFitView();

      function startAnimation() {
        marker.moveAlong(lineArr, 200);
      }

      function pauseAnimation() {
        marker.pauseMove();
      }

      function resumeAnimation() {
        marker.resumeMove();
      }

      function stopAnimation() {
        marker.stopMove();
      }
    </script>
  </body>
</html>
